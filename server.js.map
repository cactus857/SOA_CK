{"mappings":"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","sources":["public/js/index.js"],"sourcesContent":["/* eslint-disable */\r\n\r\n// Import only modules that exist\r\n// Remove problematic imports temporarily\r\n// import { displayMap } from './mapbox';\r\n// import { login, logout } from './login';\r\n// import { bookTour } from './stripe';\r\n// import { updateUserData, updatePassword } from './updateSettings';\r\n// import { showAlert } from './alerts';\r\n\r\n// Only run on browser, not on Node.js\r\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\r\n    // DELEGATION\r\n    // Map\r\n    const mapElement = document.getElementById('map');\r\n    if (mapElement)\r\n        mapElement.addEventListener('load', () => {\r\n            displayMap(JSON.parse(mapElement.dataset.locations));\r\n        });\r\n\r\n    // Login form\r\n    const loginForm = document.querySelector('.form--login');\r\n    if (loginForm) {\r\n        loginForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            const email = document.getElementById('email').value;\r\n            const password = document.getElementById('password').value;\r\n            login(email, password);\r\n        });\r\n    }\r\n\r\n    // Logout button\r\n    const logOutBtn = document.querySelector('.nav__el--logout');\r\n    if (logOutBtn) logOutBtn.addEventListener('click', logout);\r\n\r\n    // User data form\r\n    const userDataForm = document.querySelector('.form-user-data');\r\n    if (userDataForm) {\r\n        userDataForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            const form = new FormData();\r\n            form.append('name', document.getElementById('name').value);\r\n            form.append('email', document.getElementById('email').value);\r\n            form.append('photo', document.getElementById('photo').files[0]);\r\n\r\n            updateUserData(form);\r\n        });\r\n    }\r\n\r\n    // User password form\r\n    const userPasswordForm = document.querySelector('.form-user-password');\r\n    if (userPasswordForm) {\r\n        userPasswordForm.addEventListener('submit', async e => {\r\n            e.preventDefault();\r\n            document.querySelector('.save-password').textContent = 'Updating...';\r\n\r\n            const passwordCurrent = document.getElementById('password-current').value;\r\n            const password = document.getElementById('password').value;\r\n            const passwordConfirm = document.getElementById('password-confirm').value;\r\n            await updatePassword(passwordCurrent, password, passwordConfirm);\r\n\r\n            document.querySelector('.save-password').textContent = 'Save password';\r\n            document.getElementById('password-current').value = '';\r\n            document.getElementById('password').value = '';\r\n            document.getElementById('password-confirm').value = '';\r\n        });\r\n    }\r\n\r\n    // Signup form\r\n    const signupForm = document.querySelector('.form--signup');\r\n    if (signupForm) {\r\n        signupForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            const name = document.getElementById('name').value;\r\n            const email = document.getElementById('email').value;\r\n            const password = document.getElementById('password').value;\r\n            const passwordConfirm = document.getElementById('passwordConfirm').value;\r\n\r\n            // Call signup function (if exists)\r\n            if (typeof window.signup !== 'undefined') {\r\n                window.signup(name, email, password, passwordConfirm);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Reset password form\r\n    const resetForm = document.querySelector('.form--reset');\r\n    if (resetForm) {\r\n        resetForm.addEventListener('submit', e => {\r\n            e.preventDefault();\r\n            const email = document.getElementById('email').value;\r\n\r\n            // Call forgot password function (if exists)\r\n            if (typeof window.forgotPassword !== 'undefined') {\r\n                window.forgotPassword(email);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Update password form\r\n    const updatePassForm = document.querySelector('.form--updatePass');\r\n    if (updatePassForm) {\r\n        updatePassForm.addEventListener('submit', async e => {\r\n            e.preventDefault();\r\n            const password = document.getElementById('password').value;\r\n            const passwordConfirm = document.getElementById('passwordConfirm').value;\r\n\r\n            // Call reset password function (if exists)\r\n            if (typeof window.resetPassword !== 'undefined') {\r\n                await window.resetPassword(password, passwordConfirm);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Book tour button\r\n    const bookBtn = document.getElementById('book-tour');\r\n    if (bookBtn)\r\n        bookBtn.addEventListener('click', e => {\r\n            e.target.textContent = 'Processing...';\r\n            const { tourId } = e.target.dataset;\r\n            bookTour(tourId);\r\n        });\r\n\r\n    // Alerts\r\n    const alert = document.body.dataset.alert;\r\n    if (alert) showAlert('success', alert, 20);\r\n}"],"names":[],"version":3,"file":"server.js.map","sourceRoot":"/"}